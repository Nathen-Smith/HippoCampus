!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@aws-amplify/core")):"function"==typeof define&&define.amd?define("aws_amplify_xr",["@aws-amplify/core"],t):"object"==typeof exports?exports.aws_amplify_xr=t(require("@aws-amplify/core")):e.aws_amplify_xr=t(e["@aws-amplify/core"])}(this,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t),n.d(t,"XR",(function(){return R})),n.d(t,"SumerianProvider",(function(){return P})),n.d(t,"XRError",(function(){return a})),n.d(t,"XRNoSceneConfiguredError",(function(){return l})),n.d(t,"XRSceneNotFoundError",(function(){return f})),n.d(t,"XRSceneNotLoadedError",(function(){return p})),n.d(t,"XRNoDomElement",(function(){return d})),n.d(t,"XRSceneLoadFailure",(function(){return h})),n.d(t,"XRProviderNotConfigured",(function(){return g}));var r,o=n(0),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=new o.ConsoleLogger("AbstractXRProvider"),s=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=i(i({},e),this._config),u.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"XR"},Object.defineProperty(e.prototype,"options",{get:function(){return i({},this._config)},enumerable:!0,configurable:!0}),e}(),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(Error),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(a),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,s)}c((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},m=new o.ConsoleLogger("SumerianProvider"),P=function(e){function t(t){return void 0===t&&(t={}),e.call(this,t)||this}return y(t,e),t.prototype.getProviderName=function(){return"SumerianProvider"},t.prototype.loadScript=function(e){return b(this,void 0,void 0,(function(){return w(this,(function(t){return[2,new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.addEventListener("load",(function(e){t()})),r.addEventListener("error",(function(t){n(new Error("Failed to load script: "+e))})),document.head.appendChild(r)}))]}))}))},t.prototype.loadScene=function(e,t,n){return b(this,void 0,void 0,(function(){var r,i,u,s,c,a,l,f,p,g,y,b,P,S,C,O,x,R,j,A,E,N,X,k,V,L,M;return w(this,(function(w){switch(w.label){case 0:if(!e)throw a="No scene name passed into loadScene",m.error(a),new h(a);if(!t)throw a="No dom element id passed into loadScene",m.error(a),new d(a);if(!(r=document.getElementById(t)))throw a="DOM element id, "+t+" not found",m.error(a),new d(a);if(!(i=this.getScene(e)).sceneConfig)throw a="No scene config configured for scene: "+e,m.error(a),new h(a);if(u=i.sceneConfig.url,s=i.sceneConfig.sceneId,i.sceneConfig.hasOwnProperty("region"))c=i.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw a="No region configured for scene: "+e,m.error(a),new h(a);c=this.options.region}l={region:c,customUserAgent:o.Constants.userAgent+"-SumerianScene"},f={headers:{"X-Amz-User-Agent":o.Constants.userAgent}},p=u,w.label=1;case 1:return w.trys.push([1,3,,4]),[4,o.Credentials.get()];case 2:return g=w.sent(),l.credentials=g,y={secret_key:g.secretAccessKey,access_key:g.accessKeyId,session_token:g.sessionToken},b={region:c,service:"sumerian"},P=o.Signer.sign({method:"GET",url:u},y,b),f.headers=v(v({},f.headers),P.headers),p=P.url,[3,4];case 3:return w.sent(),m.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(p,f)];case 5:return[4,(S=w.sent()).json()];case 6:if(C=w.sent(),403===S.status)throw C.message?(m.error("Failure to authenticate user: "+C.message),new h("Failure to authenticate user: "+C.message)):(m.error("Failure to authenticate user"),new h("Failure to authenticate user"));return O=C.bundleData[s],[4,fetch(O.url,{headers:O.headers})];case 7:return[4,w.sent().json()];case 8:x=w.sent(),w.label=9;case 9:return w.trys.push([9,11,,12]),[4,this.loadScript(x[s].bootstrapperUrl)];case 10:return w.sent(),[3,12];case 11:throw R=w.sent(),m.error(R),new h(R);case 12:return j=n.progressCallback?n.progressCallback:void 0,A=i.publishParamOverrides?i.publishParamOverrides:void 0,E={element:r,sceneId:s,sceneBundle:x,apiResponse:C,progressCallback:j,publishParamOverrides:A,awsSDKConfigOverride:l},[4,window.SumerianBootstrapper.loadScene(E)];case 13:N=w.sent(),i.sceneController=N,i.isLoaded=!0;try{for(X=_(N.sceneLoadWarnings),k=X.next();!k.done;k=X.next())V=k.value,m.warn("loadScene warning: "+V)}catch(e){L={error:e}}finally{try{k&&!k.done&&(M=X.return)&&M.call(X)}finally{if(L)throw L.error}}return[2]}}))}))},t.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},t.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw m.error(t),new l(t)}if(!e){t="No scene name was passed";throw m.error(t),new f(t)}if(!this.options.scenes[e]){t="Scene '"+e+"' is not configured";throw m.error(t),new f(t)}return this.options.scenes[e]},t.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw m.error(t),new l(t)}var n=this.options.scenes[e];if(!n){t="Scene '"+e+"' is not configured";throw m.error(t),new f(t)}var r=n.sceneController;if(!r){t="Scene controller for '"+e+"' has not been loaded";throw m.error(t),new p(t)}return r},t.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},t.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},t.prototype.start=function(e){this.getSceneController(e).start()},t.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},t.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},t.prototype.isMuted=function(e){return this.getSceneController(e).muted},t.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},t.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},t.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},t}(s),S=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,s)}c((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},O=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},x=new o.ConsoleLogger("XR"),R=new(function(){function e(e){this._options=e,x.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new P)}return e.prototype.configure=function(e){var t=this,n=e?e.XR||e:{};return x.debug("configure XR",{opt:n}),this._options=Object.assign({},this._options,n),Object.entries(this._pluggables).map((function(e){var r=O(e,2),o=r[0],i=r[1];o!==t._defaultProvider||n[t._defaultProvider]?i.configure(t._options[o]):i.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return S(this,void 0,void 0,(function(){return C(this,(function(t){return e&&"XR"===e.getCategory()?(this._pluggables[e.getProviderName()]=e,[2,e.configure(this._options)]):[2]}))}))},e.prototype.loadScene=function(e,t,n,r){return void 0===n&&(n={}),void 0===r&&(r=this._defaultProvider),S(this,void 0,void 0,(function(){return C(this,(function(o){switch(o.label){case 0:if(!this._pluggables[r])throw new g("Provider '"+r+"' not configured");return[4,this._pluggables[r].loadScene(e,t,n)];case 1:return[2,o.sent()]}}))}))},e.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},e.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},e.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},e.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},e.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},e.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},e.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},e.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},e.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new g("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},e.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new g("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},e.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new g("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},e}())(null);o.Amplify.register(R);t.default=R}])}));
//# sourceMappingURL=aws-amplify-xr.min.js.map